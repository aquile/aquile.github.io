<!DOCTYPE html>
<html lang="en">
<head>
    <script>window['__isgadget'] = true;</script>
    <script src="/resources/shindig/464d88bec91c42601c508c4d16a097ad"></script>
    <script src="/resources/shindig/fdfdaba969789bc49023e60d2d1d2018"></script>
    <script>gadgets.config.init({
        "container": {
            "relayPath": "https://uat.hub.wiley.com/gadgets/files/container/rpc_relay.html",
            "jsPath": "/gadgets/js",
            "enableRpcArbitration": false
        },
        "core.io": {
            "unparseableCruft": "throw 1; \u003c don't be evil' \u003e",
            "jsPath": "/gadgets/js",
            "xhrPollIntervalMs": 50,
            "jsonProxyUrl": "https://%host%/gadgets/makeRequest",
            "proxyUrl": "https://%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%authz%%rewriteMime%"
        },
        "osapi.services": {"https://%host%/social/rpc": ["jive.market.installMultiAppNonTransactional", "jive.core.delete", "jive.market.requestAppSync", "albums.create", "http.head", "gadgets.token", "activitystreams.supportedFields", "jive.market.getSbsContext", "activities.create", "http.get", "jive.market.installMultiApp", "jive.core.patch", "jive.version.getVersionInfo", "mediaItems.delete", "jive.ext.delete", "people.get", "jive.connects.get", "jive.connects.reset", "gadgets.supportedFields", "gadgets.cajaSupportedFields", "systemSettings.update", "jive.market.installApp", "jive.connects.delete", "jive.core.get", "mediaItems.update", "groups.update", "jive.market.uninstallApp", "http.put", "appdata.create", "activitystreams.delete", "http.delete", "cache.invalidate", "application.get", "jive.connects.patch", "systemSettings.create", "jive.ext.post", "jive.market.isCachingEnabled", "albums.delete", "groups.supportedFields", "messages.delete", "jive.connects.head", "appdata.update", "jive.ext.put", "groups.create", "people.update", "activities.supportedFields", "jive.connects.put", "jive.connects.post", "http.post", "albums.get", "jive.market.refreshApp", "gadgets.cajole", "gadgets.proxySupportedFields", "people.supportedFields", "jive.dev.isCachingEnabled", "gadgets.metadata", "jive.binary.metadata", "albums.supportedFields", "albums.update", "activities.delete", "mediaItems.get", "groups.get", "jive.core.post", "jive.dev.setCachingEnabled", "jive.market.setCachingEnabled", "gadgets.proxy", "activities.update", "jive.connects.pooled", "jive.binary.token", "activitystreams.create", "activitystreams.get", "jive.connects.connection", "jive.core.put", "jive.ext.patch", "jive.connects.update", "messages.get", "activitystreams.update", "jive.market.getAppInstances", "mediaItems.create", "messages.create", "gadgets.jsSupportedFields", "systemSettings.delete", "groups.delete", "jive.connects.configuration", "gadgets.tokenSupportedFields", "activities.get", "gadgets.js", "jive.ext.get", "appdata.get", "appdata.delete", "systemSettings.get", "jive.market.publishExtension", "jive.connects.statistics", "system.listMethods"]},
        "opensocial": {
            "path": "https://%host%/social/rpc",
            "invalidatePath": "https://uat.hub.wiley.com/gadgets/api/rpc",
            "domain": "shindig",
            "enableCaja": false,
            "supportedFields": {
                "activity": ["appId", "body", "bodyId", "externalId", "id", "mediaItems", "postedTime", "priority", "streamFaviconUrl", "streamSourceUrl", "streamTitle", "streamUrl", "templateParams", "title", "url", "userId"],
                "person": ["id", {"name": ["familyName", "givenName", "unstructured"]}, "emails", "thumbnailUrl", "profileUrl", "aboutMe", "hasApp", "photos", "jive_enabled"],
                "album": ["id", "thumbnailUrl", "title", "description", "location", "ownerId"],
                "mediaItem": ["album_id", "created", "description", "duration", "file_size", "id", "language", "last_updated", "location", "mime_type", "num_comments", "num_views", "num_votes", "rating", "start_time", "tagged_people", "tags", "thumbnail_url", "title", "type", "url"],
                "group": ["id", "title", "description"],
                "activityEntry": ["actor", "content", "generator", "icon", "id", "object", "published", "provider", "target", "title", "updated", "url", "verb", "openSocial", "extensions"]
            }
        },
        "shindig.auth": {},
        "rpc": {
            "useLegacyProtocol": false,
            "commSwf": "https://uat.hub.wiley.com/gadgets/xpc.swf",
            "passReferrer": "c2p:query",
            "parentRelayUrl": "/gadgets/ifpc.relay.html"
        },
        "jive-opensocial-ext-v1": {
            "version": "",
            "jiveUrl": "https://uat.hub.wiley.com",
            "jiveTenantID": "aa99e826-a6dd-4470-a07b-c78877791d49-uat",
            "marketId": "b2c37f85-f849-4597-a5ca-8acb171c4f21"
        },
        "osapi": {"endPoints": ["https://%host%/social/rpc"]},
        "core.util": {
            "opensocial-2.5": {},
            "core": {},
            "jive-opensocial-ext-v1": {},
            "dynamic-width": {},
            "jive-lightweight-tile-api": {},
            "jquery-1.11.1": {},
            "dynamic-height": {},
            "oauthpopup": {},
            "jive-core-v3": {}
        },
        "views": {
            "default": {
                "aliases": ["DEFAULT", "profile"],
                "urlTemplate": "https://uat.hub.wiley.com/gadgets/default?{var}",
                "isOnlyVisible": false
            },
            "canvas": {
                "aliases": ["FULL_PAGE"],
                "urlTemplate": "https://uat.hub.wiley.com/gadgets/canvas?{var}",
                "isOnlyVisible": true
            },
            "system-settings": {"isOnlyVisible": true},
            "about": {"isOnlyVisible": false},
            "user-prefs": {"isOnlyVisible": true},
            "embedded": {"isOnlyVisible": true},
            "home": {
                "aliases": ["HOME"],
                "urlTemplate": "https://uat.hub.wiley.com/gadgets/home?{var}",
                "isOnlyVisible": false
            }
        }
    });
    </script>
    <script>gadgets.Prefs.setMessages_({});
    gadgets.Prefs.setDefaultPrefs_({});
    gadgets.io.preloaded_ = [];</script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700" rel="stylesheet" type="text/css">
    <style>* {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }

    html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, menu, nav, output, ruby, section, summary, time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 1em;
        vertical-align: baseline;
    }

    article, aside, details, figcaption, figure, footer, header, menu, nav, section {
        display: block;
    }

    body {
        font-size: 16px;
    }

    .slider-wrapper {
        display: block;
        position: relative;
        width: 80%;
        width: 64%;
        width: 100%;
        height: 345px;
        margin: 0 auto;
        border-radius: 10px;
        overflow: hidden;
        -background: lightgoldenrodyellow;
        color: #ffffff;
        font-family: 'Open Sans', sans-serif;
        font-weight: 700;
    }

    .slider__images {
        position: relative;
        width: 100%;
        height: 100%;
        transition: margin-left ease-in-out 0.7s;
    }

    .slider__images-wrap {
        -width: 300%;
        font-size: 0;
        height: 529px;
        white-space: nowrap;
    }

    .slider__images img {
        display: inline-block;
        -width: calc(100% / 3);
        vertical-align: top;
    }

    .slider__pagination {
        display: block;
        width: 100%;
        height: 50px;
        margin: 23px 0 0;
        list-style: none;
        text-align: center;
        cursor: pointer;
    }

    .slider__pagination li {
        display: inline-block;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        margin: 0 6px;
        background: #B9B9B9;
        cursor: pointer;
    }

    .slider__pagination-item.active {
        background: #75CB9C;
    }

    .slider__pagination-item:hover {
        background: #75CB9C;
    }

    .slider-circle-1 {
        display: block;
        width: 456px;
        height: 456px;
        position: absolute;
        left: -163px;
        bottom: -299px;
        border-radius: 50%;
        border: 4px dotted #ffffff;
    }

    .slider-circle-2 {
        display: block;
        width: 490px;
        height: 490px;
        position: absolute;
        top: -132px;
        right: 23px;
        transform: rotate(-45deg);
        border-radius: 50%;
        border-top: 4px dotted #19A5B3;
        border-left: 4px dotted #19A5B3;
        background: transparent;
    }

    .slider-circle-3 {
        display: block;
        width: 437px;
        height: 437px;
        position: absolute;
        top: -108px;
        right: 39px;
        border-radius: 50%;
        background: #19A5B3;
        cursor: pointer;
    }

    .slider-circle-3 h2 {
        position: absolute;
        bottom: 192px;
        left: 0;
        right: 0;
        padding-left: 52px;
        font-size: 41px;
        letter-spacing: -1.4px;
        font-weight: 700;
        line-height: 42px;
        color: #FFFFFF;
    }

    .slider-circle-3 p {
        width: 370px;
        position: absolute;
        bottom: 121px;
        left: 0;
        right: 0;
        padding-left: 56px;
        font-size: 14px;
        letter-spacing: -0.9px;
        font-weight: 400;
        line-height: 19px;
        color: #FFFFFF;
    }

    .slider-circle-4 {
        display: block;
        width: 220px;
        height: 220px;
        position: absolute;
        bottom: -105px;
        right: 62px;
        border-radius: 50%;
        background: #095B55;
        text-align: center;
        cursor: pointer;
    }

    .slider-circle-4 p {
        position: absolute;
        top: 64px;
        left: 0;
        right: 0;
        padding-left: 5px;
        font-size: 18px;
        font-weight: 400;
    }

    .slider__pagination.greenblue {
        display: block;
        width: 100%;
        height: 50px;
        margin: 23px 0 0;
        list-style: none;
        text-align: center;
        cursor: pointer;
    }

    .slider__pagination.magenta {
        display: block;
        width: 100%;
        height: 50px;
        margin: 27px 0 0;
        list-style: none;
        text-align: center;
        cursor: pointer;
    }

    .slider__pagination li {
        display: inline-block;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        margin: 0 6px;
        background: #B9B9B9;
        cursor: pointer;
    }

    .slider__pagination-item.active {
        background: #75CB9C;
    }

    .slider__pagination-item:hover {
        background: #75CB9C;
    }

    .slider-circle-1.greenblue {
        display: block;
        width: 456px;
        height: 456px;
        position: absolute;
        left: -163px;
        bottom: -299px;
        border-radius: 50%;
        border: 4px dotted #ffffff;
    }

    .slider-circle-1.magenta {
        display: block;
        width: 456px;
        height: 456px;
        position: absolute;
        left: -410px;
        bottom: -309px;
        border-radius: 50%;
        border: 4px dotted #ffffff;
    }

    .slider-circle-2.greenblue {
        display: block;
        width: 490px;
        height: 490px;
        position: absolute;
        top: -132px;
        right: 23px;
        transform: rotate(-45deg);
        border-radius: 50%;
        border-top: 4px dotted #19A5B3;
        border-left: 4px dotted #19A5B3;
        background: transparent;
    }

    .slider-circle-3.greenblue {
        display: block;
        width: 437px;
        height: 437px;
        position: absolute;
        top: -108px;
        right: 39px;
        border-radius: 50%;
        background: #19A5B3;
        cursor: pointer;
    }

    .slider-circle-3.greenblue h2 {
        position: absolute;
        bottom: 192px;
        left: 0;
        right: 0;
        padding-left: 52px;
        font-size: 41px;
        letter-spacing: -1.4px;
        font-weight: 700;
        line-height: 42px;
        color: #FFFFFF;
    }

    .slider-circle-3.greenblue p {
        width: 370px;
        position: absolute;
        bottom: 121px;
        left: 0;
        right: 0;
        padding-left: 56px;
        font-size: 14px;
        letter-spacing: -0.9px;
        font-weight: 400;
        line-height: 19px;
        color: #FFFFFF;
    }

    .slider-circle-4.greenblue {
        display: block;
        width: 220px;
        height: 220px;
        position: absolute;
        bottom: -105px;
        right: 62px;
        border-radius: 50%;
        background: #095B55;
        text-align: center;
        cursor: pointer;
    }

    .slider-circle-4.greenblue p {
        position: absolute;
        top: 64px;
        left: 0;
        right: 0;
        padding-left: 5px;
        font-size: 18px;
        font-weight: 400;
    }

    .slider-circle-2.magenta {
        display: block;
        width: 550px;
        height: 513px;
        position: absolute;
        top: -459px;
        right: 177px;
        z-index: 40;
        border-radius: 50%;
        border: 4px dotted #ffffff;
        background: transparent;
    }

    .slider-circle-3.magenta {
        display: block;
        width: 515px;
        height: 515px;
        position: absolute;
        top: -93px;
        right: 370px;
        border-radius: 50%;
        background: #D10C45;
        cursor: pointer;
    }

    .slider-circle-3.magenta h2 {
        position: absolute;
        bottom: 231px;
        left: 0;
        right: 0;
        padding-left: 52px;
        font-size: 46px;
        letter-spacing: -0.6px;
        font-weight: 700;
        line-height: 62px;
        color: #FFFFFF;
    }

    .slider-circle-3.magenta p {
        width: 453px;
        position: absolute;
        bottom: 154px;
        left: 0;
        right: 0;
        padding-left: 56px;
        font-size: 14px;
        letter-spacing: -1.2px;
        font-weight: 400;
        line-height: 19px;
        color: #FFFFFF;
    }

    .slider-circle-4.magenta {
        display: block;
        width: 193px;
        height: 159px;
        position: absolute;
        bottom: -105px;
        right: 448px;
        background: #D10C45;
        text-align: center;
        cursor: pointer;
    }

    .slider-circle-4.magenta p {
        position: absolute;
        top: 1px;
        left: 0;
        right: 0;
        padding-left: 5px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        text-align: left;
    }</style>
    <meta charset="UTF-8">
    <title>Slider</title>


</head>
<body dir="ltr" ng-app="sliderApp">
<script src="https://uat.hub.wiley.com/resources/add-ons/0f5e9824-1e0e-4c50-bd5b-a317424a137f/c005774324/tiles/wiley-db-slider/javascripts/angular.min.js"></script>
<div class="slider-wrapper" ng-controller="MainController">

    <div class="slider__images">
        <div class="slider__images-wrap">
            <a data-subtitle="{{elem.subtitle}}" data-title="{{elem.title}}" href="{{elem.titleUrl}}"
               ng-repeat="elem in slidesData" target="_top">
                <img alt="Photo" data-index="{{$index}}" ng-src="{{elem.imageUrl}}">
            </a>
        </div>
    </div>

    <div class="slider-circle-1 {{ color }}"></div>
    <a class="slider-circle-2 {{ color }}" href="#"></a>
    <a class="slider-circle-3 {{ color }}" href="#">

        <h2>
            <!--<span>Discover the</span> <br/>-->
            <!--<span> future of research.</span>-->
        </h2>

        <p></p>
        <!--<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et-->
        <!--dolore magna aliqua. Ut enim ad minim veniam, quis nostrud</p>-->
    </a>
    <!--<a class="slider-circle-4"><p>Learn more...</p><span>&#62;</span></a>-->
    <a class="slider-circle-4 {{ color }}"><p>Dolor consecteur <span>&gt;</span></p></a>
</div>

<ul class="slider__pagination" ng-controller="MainController2">
    <li class="slider__pagination-item" ng-repeat="elem in pagination">
        <a class="" data-index="{{$index}}" data-item="{{elem.title}}" href="#"></a>
    </li>
</ul>

<script>
    var app = angular.module('sliderApp', []);
    var paginatorObj;

    app.controller('MainController', ['$scope', function ($scope) {

        //Set default color
        $scope.color = 'greenblue';

        jive.tile.onOpen(function (config, options) {
            gadgets.window.adjustHeight();

            //set origin obj to put it in paginator
            paginatorObj = config.slides;

            //cloning first slide to provide slider carusele
            var cloneObj = {
                imageUrl: config.slides[0].imageUrl,
                title: config.slides[0].title,
                subtitle: config.slides[0].subtitle,
                titleURL: config.slides[0].titleURL
            };
            config.slides.push(cloneObj);

            //set scope values
            $scope.slidesData = config.slides;
            $scope.color = config.color;

            console.log($scope.slidesData);
        })
    }]);

    app.controller('MainController2', ['$scope', function ($scope) {
        $scope.pagination = paginatorObj;
        console.log($scope.pagination);
    }]);

</script>

<script>
    function Slider(interval, timeout, transition) {
        //Local variables
        var sliderDiv = document.body.querySelector('.slider__images'),
                sliderImgWrp = sliderDiv.querySelector('.slider__images-wrap'),
                sliderImgArr = sliderImgWrp.querySelectorAll('img'),
                paginatorArr = document.body.querySelectorAll('.slider__pagination-item'),
                sliderANodes = sliderImgWrp.querySelectorAll('a'),
                sliderCircl3 = document.body.querySelector('.slider-circle-3'),
                sliderCircl3H2 = sliderCircl3.querySelector('h2'),
                sliderCircl3P = sliderCircl3.querySelector('p'),
                sliderDivWidth;
        var slidesCounter = 0,
                paginatorCounter = 0,
                slidesCounterMax = sliderImgArr.length; //4
        var intId, timeOutId;

        //Set width to images wrapper to put them in line
        function setWidths() {
            //Set this dimension
            sliderDivWidth = sliderDiv.offsetWidth;

            sliderImgWrp.style.width = sliderDivWidth * 3 + "px";
            //Set img width
            for (var i = 0; i < sliderImgArr.length; i++) {
                sliderImgArr[i].style.width = sliderDivWidth + "px";
            }
        }

        //add first paginator class
        paginatorArr[0].classList.toggle('active');

        //this function slide the images
        function slider() {
            slidesCounter++;
            if (slidesCounter == slidesCounterMax) {
                sliderDiv.style.transition = 'margin-left ease-in-out ' + 0 + 's';
                sliderDiv.style.marginLeft = "0";
                slidesCounter = 0;
            }
            fading();
            paginator();
            styling();

            intId = setTimeout(slider, interval);
            //if the slider is last one

        }

        function fading() {
            var index = +sliderImgArr[slidesCounter].dataset.index;
            //Hide title and subtitle in .slider-circle-3
            fadeOut(sliderCircl3H2);
            fadeOut(sliderCircl3P);
            //Add new text picked form data-attr of <a> to title and subtittle in .slider-circle-3
            sliderCircl3H2.textContent = sliderANodes[index].dataset.title;
            sliderCircl3P.textContent = sliderANodes[index].dataset.subtitle;
            fadeIn(sliderCircl3H2);
            fadeIn(sliderCircl3P);
        }

        //this function add some beauty to the sliding of images
        function styling() {
            sliderDiv.style.marginLeft = "-" + slidesCounter * sliderDivWidth + "px";
            setTimeout(function () {
                sliderDiv.style.transition = 'margin-left ease-in-out ' + transition + 's';
            }, 300);
        }

        //add .active class to the actual pagination li node
        function paginator() {
            var index = +sliderImgArr[slidesCounter].dataset.index;
            for (var i = 0; i < paginatorArr.length; i++) {
                paginatorArr[i].classList.remove('active');
            }
            if (+index == paginatorArr.length) {
                index = 0
            }
            paginatorArr[index].classList.add('active');
        }

        //adding pagition controls
        Array.prototype.forEach.call(paginatorArr, function (el, i) {
            el.addEventListener('click', function () {
                clearTimeout(intId);
                clearTimeout(timeOutId);
                intId = 0;

                slidesCounter = i - 1;
                for (var j = 0; j < paginatorArr.length; j++) {
                    paginatorArr[j].classList.remove('active');
                }
                el.classList.add('active');

                sliderDiv.style.transition = 'margin-left ease-in-out ' + transition + 's';
                sliderDiv.style.marginLeft = "-" + i * sliderDivWidth + "px";


                fadeOut(sliderCircl3H2);
                fadeOut(sliderCircl3P);
                //Add new text picked form data-attr of <a> to title and subtittle in .slider-circle-3
                sliderCircl3H2.textContent = sliderANodes[i].dataset.title;
                sliderCircl3P.textContent = sliderANodes[i].dataset.subtitle;
                fadeIn(sliderCircl3H2);
                fadeIn(sliderCircl3P);

                timeOutId = setTimeout(function () {
                    slider();
                }, timeout)
            })

        });

        //stopping slider when cursor over the slider
        for (var i = 0; i < sliderANodes.length; i++) {
            sliderANodes[i].addEventListener('mouseover', function () {
                clearTimeout(timeOutId);
                clearTimeout(intId);
            });

            sliderANodes[i].addEventListener("mouseout", function () {
                intId = setTimeout(slider, interval);
            })
        }


        function fadeIn(el) {
            el.style.opacity = 0;

            var last = +new Date();
            var tick = function () {
                el.style.opacity = +el.style.opacity + (new Date() - last) / 400;
                last = +new Date();

                if (+el.style.opacity < 1) {
                    (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16)
                }
            };

            tick();
        }

        function fadeOut(el) {
            el.style.opacity = 1;

            var last = +new Date();
            var tick = function () {
                el.style.opacity = +el.style.opacity - (new Date() - last) / 400;
                last = +new Date();

                if (+el.style.opacity > 0) {
                    (window.requestAnimationFrame && requestAnimationFrame(tick)) || setTimeout(tick, 16)
                }
            };

            tick();
        }

        setWidths();
        fading();
        window.onresize = setWidths;

        //initialize slider
        intId = setTimeout(slider, interval);
    }
</script>

<script>
    var slider;
    setTimeout(function () {
        slider = new Slider(2000, 5000, 0.7);
    }, 10000);

</script>


