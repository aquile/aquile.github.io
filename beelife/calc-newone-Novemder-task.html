<!DOCTYPE html>

<html lang="en">


<meta charset="UTF-8">
<!-- ROBOTO medium -->
<!--<link rel="stylesheet" href="./font/webfontkit-20150612-045405/stylesheet.css"/>-->
<!--&lt;!&ndash;&lt;!&ndash; ROBOTO light &ndash;&gt;&ndash;&gt;-->
<!--<link rel="stylesheet" href="./font/webfontkit-20150617-123155/stylesheet.css"/>-->
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<!--<script src="jquery.min.js"></script>-->


<style>
    body {
        height: 800px;
        font-size: 14px;
        font-family: 'robotomedium', sans-serif;

        margin: 0 auto;
        padding: 0;
    }

    .header-1 {
        font-family: 'robotolight', sans-serif;
        font-size: 48px;
        margin-bottom: 20px;
    }

    .header-2 {
        position: relative;
        font-family: 'robotolight', sans-serif;
        font-size: 20px;
        margin-bottom: 20px;
    }

    .yellow-table {
        width: 762px;
        margin: 0 auto;
        border: 2px solid #F4CF19;
        border-spacing: 0;

    }

    .pencil-icon {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAYAAAARfGZ1AAAAAXNSR0ICQMB9xQAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAABl0RVh0U29mdHdhcmUATWljcm9zb2Z0IE9mZmljZX/tNXEAAAGuSURBVEjHrZbPK0RRFMff1EyNmGRQQxmLISt/go2FlZRSko0FUpaSlaYnm1EssGDBwgZLs1Fm5UcZkSykJsSwUZKFP4DP1aHred5Ptz6Ld+be79x7vuee9wzTNI2wMLphGkag9jseUrQGDuAcVmAXnqArlDijEm5hyxLvhxdIBhWugBMoyq7Tlt/zMBxEOApnsCnPE3ANjdoclf+cX+EIHMGOFquCdyhDncS2YcyveAH2tOck3MMUzMIp9MAj1PsRVnk8VLuX5wTcwJI2Z0NO0eu5WlRFSJ6jmqGXsKbNaYEHGPVc54x1EYrbGSqxtJTf5I+1LsLLUgkJB0NTcnGyv9Y7CM/JMZMuhqo5OVuNP4SzspuUH0NdxVXeJH9pB0PjVkNdxZXT8AqtDobGrIa6ijP6pEYzfgz1Kl6Um6Vy2yF5L9sYWvB88WRRk7TPBhiHO3i2COdl1xG/4kOwrwk1QwmqLYbGfPUirYvNW8xd/GybxHVDg4hfSRratSs+IAZffBkaoPcbGWmVM/AmpyjJH66q92SIV6ExqO3wGBagM0ga7MTbVP9VFfMfnxk6H44wgflBVoprAAAAAElFTkSuQmCC);
        background-repeat: no-repeat;
        background-position: left center;
        background-position: 10px center;
        background-size: 16px 16px;
    }

    .yellow-cell {
        background-color: #F8E275;
        color: #000;
    }

    .grey-cell {
        background-color: #F2F2F2;
        color: #000;
    }

    .white-cell {
        background-color: #fff;
        color: #000;
    }

    .dark-grey-cell {
        background-color: #BFBFBF;
        color: #000;
    }

    .dark-yellow-cell {
        background-color: #F4CF19;
        color: #000;
    }

    .table-spacer {
        height: 38px;
        display: block;
    }

    .small-text {
        font-size: 0.8em;
    }

    .left-cell {
        padding: 0;
        padding-left: 27px;
        font-size: 15.3px;
        height: 32px width : 523 px;
        box-sizing: border-box;
    }

    .right-cell {
        position: relative;
        padding: 0;
        padding-left: 38px;
        font-size: 15.3px;
        height: 32px;
        width: 239px;
        box-sizing: border-box;
    }

    .header-cell {
        padding: 0;
        padding-left: 8px;
        font-size: 15.3px;
        font-weight: bold;
        height: 35px;
        width: 523px;
        box-sizing: border-box;
    }

    .header-right-cell {
        padding: 0;
        padding-left: 38px;
        font-size: 15.3px;
        font-weight: bold;
        height: 35px;
        width: 239px;
        box-sizing: border-box;
    }

    .small-cell {
        padding: 0;
        padding-left: 27px;
        font-size: 11px;
        height: 32px;
        width: 523px;
        box-sizing: border-box;
    }

    .input {
        background-color: transparent;
        border-width: 0;
        font-size: 15.3px;
        width: 180px;
        outline: 0;
        font-weight: bold;
        padding: 0;
        margin: 0;
    }

    .percentage:after {
        content: '%';
        font-weight: bold;
        position: absolute;
        top: 8px;
        right: 149px;
    }

    .control.annual-calc-btn,
    .control.half-annual-calc-btn {
        display: inline-block;
        width: 110px;
        height: 30px;
        background-color: #BFBFBF;
        color: #000;
        text-align: center;
        line-height: 30px;
        font-weight: bold;
    }

    .control.annual-calc-btn.active,
    .control.half-annual-calc-btn.active {
        background-color: #F4CF19;
        color: #000;
    }

    .control.annual-calc-btn:hover,
    .control.half-annual-calc-btn:hover {
        cursor: pointer;
    }

    .annual,
    .half-annual {
    }

    .annual.active,
    .half-annual.active {
        display: block;
        width: 100%;
        margin: 20px auto;
    }

    #B1-half-year {
        display: block;
        position: absolute;
        top: 4px;
        height: auto;
        background: rgba(241, 241, 241, 0.83);
        padding: 5px 0 !important;
        border-radius: 5px;
        border: 1px solid grey;
        z-index: 41;
    }

    #B2-half-year {
        display: none;
        position: absolute;
        top: 4px;
        height: auto;
        background: rgba(241, 241, 241, 0.83);
        padding: 5px 0 !important;
        border-radius: 5px;
        border: 1px solid #999;
        z-index: 40;
    }

    #B23 > ul {
        display: none;
        position: absolute;
        top: 4px;
        height: auto;
        background: rgba(241, 241, 241, 0.83);
        padding: 5px 0 !important;
        border-radius: 5px;
        border: 1px solid #999;
        z-index: 40;
    }

    ul {
        padding: 0;
        margin: 0;
    }

    li {
        display: block;
        min-width: 170px;
        cursor: pointer;
        padding: 2px 10px;
        margin: 0;
        color: #494949;
        -background: rgba(241, 241, 241, 0.83);
    }

    li:hover {
        background: #e6e6e6;
    }

    .pl48 {
        padding-left: 48px;
    }

    .arrow-icon:after {
        content: '';
        display: block;
        position: absolute;
        top: 3px;
        right: 10px;
        width: 17px;
        height: 30px;
        background: url(https://in.beeline.kz/resources/statics/7685/right1.png?a=1445082594231);
        background-size: contain;
        background-repeat: no-repeat;
    }

    .bold {
        font-weight: 600;
    }

    .regular {
        font-weight: 400;
    }
</style>

<!--<div class="header-2">Благодарим за Ваш вклад! :)</div>-->

<!--<div class="control annual-calc-btn" data-period="annual">За год</div>-->
<!--<div class="control half-annual-calc-btn active" data-period="half-annual">За полугодие</div>-->

<div class="half-annual active">
    <table class="yellow-table">

        <tr>
            <td class="header-cell dark-yellow-cell" colspan="2" style="text-align: center !important;">Калькулятор
                премии за 2015 год
            </td>
        </tr>
        <tr>
            <td class="header-cell" colspan="2" style="text-align: center !important;">Мы благодарим Вас за работу в
                2015 году!
            </td>
        </tr>
        <!--<tr>-->
            <!--<td class="header-cell white-cell" colspan="2"></td>-->
        <!--</tr>-->
        <tr>
            <td class="left-cell grey-cell">Дата приема на работу</td>
            <td class="right-cell yellow-cell pencil-icon arrow-icon">
                <!--Insert here input with dates needed-->
                <ul id="B1-half-year" class="li bold">
                    <li value="6" data-multiply="6" data-year="12" data-month="6" class="selected-date">Ранее, чем в
                        2015
                        году
                    </li>
                    <li value="6" data-multiply="6" data-year="12" data-month="6">Январь 2015</li>
                    <li value="5" data-multiply="5" data-year="11" data-month="5">Февраль 2015</li>
                    <li value="4" data-multiply="4" data-year="10" data-month="4">Март 2015</li>
                    <li value="3" data-multiply="3" data-year="9" data-month="3">Апрель 2015</li>
                    <li value="2" data-multiply="2" data-year="8" data-month="2">Май 2015</li>
                    <li value="1" data-multiply="1" data-year="7" data-month="1">Июнь 2015</li>
                    <li value="0" data-multiply="0" data-year="6" data-month="0">Июль 2015</li>
                    <li value="0" data-multiply="0" data-year="5" data-month="0">Август 2015</li>
                    <li value="0" data-multiply="0" data-year="4" data-month="0">Сентябрь 2015</li>
                    <li value="0" data-multiply="0" data-year="3" data-month="0">Октябрь 2015</li>
                    <li value="0" data-multiply="0" data-year="2" data-month="0">Ноябрь 2015</li>
                    <li value="0" data-multiply="0" data-year="1" data-month="0">Декабрь 2015</li>
                </ul>
            </td>
        </tr>

        <tr>
            <td class="left-cell white-cell">PL (позицонный уровень)</td>
            <td class="right-cell yellow-cell pencil-icon arrow-icon">
                <ul id="B2-half-year" class="li bold">
                    <li data-amount="50" data-individual="0" data-corp="50" value="50">A</li>
                    <li data-amount="50" data-individual="10" data-corp="40" value="50">M5</li>
                    <li data-amount="40" data-individual="10" data-corp="30" value="40">M4</li>
                    <li data-amount="40" data-individual="10" data-corp="30" value="40">E11</li>
                    <li data-amount="30" data-individual="0" data-corp="30" value="30">M3(Директор филиала)</li>
                    <li data-amount="30" data-individual="10" data-corp="20" value="30">M3</li>
                    <li data-amount="30" data-individual="10" data-corp="20" value="30">E10</li>
                    <li data-amount="20" data-individual="10" data-corp="10" value="20">M2</li>
                    <li data-amount="20" data-individual="10" data-corp="10" value="20">E9</li>
                    <li data-amount="15" data-individual="10" data-corp="5" value="15">M1</li>
                    <li data-amount="15" data-individual="10" data-corp="5" value="15">M</li>
                    <li data-amount="15" data-individual="10" data-corp="5" value="E" data-value="E">E8</li>
                    <li data-amount="15" data-individual="10" data-corp="5" value="E" data-value="E">E7</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E6</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E5</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E4</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E3</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E2</li>
                    <li data-amount="12.5" data-individual="10" data-corp="2.5" value="E" data-value="E">E1</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="left-cell grey-cell">Оклад в месяц, тг</td>
            <td class="right-cell yellow-cell pencil-icon pl48">
                <label><input class="input" id="B3-half-year" type="text" value="0"></label>
            </td>
        </tr>
        <tr>
            <td class="left-cell white-cell">Общий размер целевой премии, %</td>
            <td id="B4-half-year" class="right-cell pl48 bold"></td>
        </tr>
    </table>
    <div class="table-spacer"></div>
    <!-- header -->
    <table class="yellow-table">
        <tr>
            <td class="header-cell dark-yellow-cell" colspan="2" style="text-align: center !important;">Полугодие</td>

        </tr>

        <tr>
            <td class="header-cell dark-grey-cell">Премия за индивидуальные результаты</td>
            <td class="header-right-cell dark-grey-cell"></td>
        </tr>
        <!--<tr>-->
        <!--<td class="left-cell grey-cell">Премия за индивидуальные результаты</td>-->
        <!--<td class="right-cell grey-cell">-->

        <!--</td>-->
        <!--</tr>-->
        <tr>
            <td class="left-cell white-cell">Целевой размер полугодовой премии, % к окладу</td>
            <td id="B7-half-year" class="right-cell white-cell pl48"></td>
        </tr>
        <tr>
            <td class="left-cell grey-cell">Сумма окладов (01.01.2015-30.06.2015 гг)*</td>
            <td id="B8-half-year" class="right-cell grey-cell pl48"></td>
        </tr>
        <tr>
            <td class="left-cell white-cell">Выполнение годовых целей при подведении итогов полугодия, %</td>
            <td class="right-cell yellow-cell pencil-icon percentage pl48">
                <label><input class="input regular" id="B9-half-year" type="text" value=""></label>
                <!-- adding % by :after-->
            </td>
        </tr>

    </table>

    <table class="yellow-table">
        <tr>
            <td class="header-cell dark-yellow-cell">Сумма полугодовой премии, тг*</td>
            <td id="B10-half-year" class="header-right-cell dark-yellow-cell pl48">0</td>
        </tr>
    </table>

    <div class="table-spacer"></div>

    <!-- _____________________________________________year__________________________________________________________-->

    <table class="yellow-table">
        <tr>
            <td class="header-cell dark-yellow-cell" colspan="2" style="text-align: center !important;">Год</td>

        </tr>
        <tr>
            <td class="left-cell white-cell">Сумма окладов (01.01.2015-31.12.2015 гг)*</td>
            <td id="B18" class="right-cell white-cell pl48">0</td>
        </tr>

        <tr>
            <td class="left-cell white-cell"></td>
            <td class="right-cell white-cell"></td>
        </tr>

        <!-- header -->
        <tr>
            <td class="header-cell dark-grey-cell">Часть премии за индивидуальные результаты</td>
            <td class="header-right-cell dark-grey-cell pl48"></td>
        </tr>

        <tr>
            <td class="left-cell white-cell">Целевой размер части премии, % к окладу</td>
            <td id="B22" class="right-cell white-cell pl48"></td>
        </tr>
        <tr>
            <td class="left-cell grey-cell">Буквенная оценка</td>
            <td id="B23" class="right-cell yellow-cell pencil-icon arrow-icon">
                <ul>
                    <li data-ind="2">A</li>
                    <li data-ind="1.5">B</li>
                    <li data-ind="1">C</li>
                    <li data-ind="0">S</li>
                    <li data-ind="0">D</li>
                    <li data-ind="0">0</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="left-cell white-cell">Размер части премии по итогам оценки, % к окладу</td>
            <td id="B24" class="right-cell white-cell pl48"></td>
        </tr>
        <tr>
            <td class="left-cell grey-cell">Сумма части премии, тг</td>
            <td id="B25" class="right-cell grey-cell bold pl48"></td>
        </tr>

        <tr>
            <td class="left-cell white-cell"></td>
            <td class="right-cell white-cell"></td>
        </tr>

        <!-- header -->
        <tr>
            <td class="header-cell dark-grey-cell">Часть премии за результаты Компании/Филиала</td>
            <td class="header-right-cell dark-grey-cell pl48"></td>
        </tr>

        <tr>
            <td class="left-cell white-cell">Целевой размер части премии, % к окладу</td>
            <td id="B29" class="right-cell white-cell pl48"></td>
        </tr>

        <tr>
            <td class="left-cell grey-cell">Выполнение целей Компании/Филиала, %</td>
            <td class="right-cell yellow-cell pencil-icon regular pl48">
                <label><input id="B30" style="width: 30px" class="input regular" type="text" value="">%</label>
            </td>
        </tr>

        <tr>
            <td class="left-cell white-cell">Сумма части премии, тг</td>
            <td id="B31" class="right-cell white-cell bold pl48">40 000</td>
        </tr>

        <tr>
            <td class="header-cell dark-yellow-cell">Сумма годовой премии, тг*</td>
            <td id="B33" class="header-right-cell dark-yellow-cell pl48">120 000</td>
        </tr>

    </table>

    <div class="table-spacer"></div>

    <table class="yellow-table">

        <tr>
            <td class="header-cell dark-yellow-cell">Сумма премий за 2015 год, тг*</td>
            <td id="B35" class="header-right-cell dark-yellow-cell pl48">120 000</td>
        </tr>
        <tr>
            <td class="small-cell white-cell" colspan="2">* примерный расчет, точная сумма расчитывается пропорционально
                отработанному времени в 2015 году
            </td>
        </tr>

    </table>


</div>


<script>
    //local variables
    var cameDateUl = $('#B1-half-year'),
            cameDateLi = $('#B1-half-year>li'),
            plUl = $('#B2-half-year'),
            plLi = $('#B2-half-year>li'),
            monthSalary = $('#B3-half-year'),
            amountAwardPercents = $('#B4-half-year'),
            indAward = $('#B7-half-year'),
            amountSalary = $('#B8-half-year'),
            annualPercentage = $('#B9-half-year'),
            halfAnnualReward = $('#B10-half-year');
    var B18 = $("#B18"),
            B22 = $("#B22"),
            B23 = $("#B23"),
            B23ul = $("#B23>ul"),
            B23lis = $("#B23 li"),
            B24 = $("#B24"),
            B25 = $("#B25"),
            B29 = $("#B29"),
            B30 = $("#B30"),
            B31 = $("#B31"),
            B33 = $("#B33"),
            B35 = $("#B35");

    var multiply;

    //add click handler to li elements of #B1-half-year
    cameDateUl.one('click', 'li', dateHandler); // and add handler to the PL list

    //add input handler
    monthSalary.on('keyup', function () {
        amountSalary.text(+monthSalary.val() * multiply);
        //fulfill B18
        cameDateLi.each(function () {
            if ($(this).hasClass("selected-date")) {
                B18.text(+monthSalary.val() * +$(this).data("year"));
            }
        });
//установить попап подсказку "нажмите ентер, когда закончите вводить" и поставить хендлер на ентер и фокус на В9тралала

        //simulate enter key on annualPercentage
//        annualPercentage.focus(function(){
//            annualPercentage.trigger(jQuery.Event('keypress', {which: 13}));
//            monthSalary.focus();
//        });

        B23ul.css('display', 'block').css("border", "1px solid grey").css("background", "rgba(241, 241, 241, 0.83)");
        B23lis.css('display', 'block');
        //add click handler to li element of #B23 > ul
        B23ul.one("click", "li", letterHadler);
    });

    //add input annualPercentage handler
    annualPercentage.on('keyup', halfAnnualAward);

    B30.on("keyup", function () {
        if(+B30.val() > 0) {

            if (B23.text() == "S" || B23.text() == "D" || +B23.text() === 0) {
                B31.text("0")
            } else {
                B31.text(+B18.text() * parseInt(B29.text()) / 100 * parseInt(B30.val()) / 100);
            }
            B33.text(+B31.text() + +B25.text());
            B35.text(+B33.text() + +halfAnnualReward.text());
        } else {
            B33.text("0");
            B35.text("0");
        }
    });

    function letterHadler($event) {
        $event.stopPropagation();


        //clear all classList & hide all li elements
        B23lis.removeClass("selected-letter");
        B23lis.css("display", "none");

        //set selected-date class on target element & show it
        $event.target.classList.add("selected-letter");
        $event.target.style.display = "block";

        //change bcg & hide border
        B23ul.css("background", "transparent").css("border", "none");

        //fulfill B4
        B23lis.each(function () {
            if ($(this).hasClass("selected-letter")) {
                B24.text(+$(this).data("ind") * parseInt(B22.text()) + " %");

                //fulfill B25
                if (+B24.text() === 0) {
                    B25.text("0");
                } else {
                    B25.text(parseInt(B18.text()) * parseInt(B24.text()) / 100 - +halfAnnualReward.text());
                }
                //focus on the month salary input
                B30.focus();
            }
        });


        B23ul.one('click', function () {
            //show li element
            B23lis.removeClass('selected-pl');
            B23lis.css('display', 'block');
            B23ul.css("border", "1px solid grey").css("background", "rgba(241, 241, 241, 0.83)");

            B23ul.one('click', 'li', letterHadler);
        })
    }

    function dateHandler($event) {

        //clear all classList & hide all li elements
        cameDateLi.removeClass('selected-date');
        cameDateLi.css('display', 'none');

        //set selected-date class on target element & show it
        $event.target.classList.add('selected-date');
        $event.target.style.display = "block";

        //change bcg & hide border
        cameDateUl.css("background", "transparent").css("border", "none");

        plUl.css('display', 'block').css("border", "1px solid grey").css("background", "rgba(241, 241, 241, 0.83)");
        plLi.css('display', 'block');


        //add new handler to have a possibility to display list again
        cameDateUl.one('click', function () {

            //show li element
            cameDateLi.removeClass('selected-date');
            cameDateLi.css('display', 'block');
            cameDateUl.css("border", "1px solid grey").css("background", "rgba(241, 241, 241, 0.83)");

            cameDateUl.one('click', 'li', dateHandler);
        });

        //add click handler to li elements of #B1-half-year
        plUl.one('click', 'li', plHandler);
    }


    function plHandler($event) {

        //clear all classList & hide all li elements
        plLi.removeClass("selected-pl");
        plLi.css("display", "none");

        //set selected-date class on target element & show it
        $event.target.classList.add("selected-pl");
        $event.target.style.display = "block";

        //change bcg & hide border
        plUl.css("background", "transparent").css("border", "none");

        //fulfill B4
        plLi.each(function () {
            if ($(this).hasClass('selected-pl')) {
                amountAwardPercents.text($(this).data("amount") + " %");

                //fulfill B22
                B22.text($(this).data("individual") + " %");

                //fulfill B29
                B29.text($(this).data("corp") + " %");
                //focus on the month salary input
                monthSalary.focus();
            }
        });


        //fulfill B7
        //get true or false in first condition
        function result1() {
            var result = null;
            cameDateLi.each(function () {
                if ($(this).hasClass('selected-date')) {
                    //get multiply number & set amount salary
                    multiply = +$(this).data('multiply');
                    amountSalary.text(+monthSalary.val() * multiply);

                    halfAnnualAward();

                    result = +$(this).data("month");
                }
            });
            return result > 2;
        }

        //get true or false in second condition
        function result2() {
            var result = null;
            plLi.each(function () {
                if ($(this).hasClass('selected-pl')) {
                    result = $(this).data("value");
                }
            });
            return result == "E";
        }

        //check general condition and fulfill B7
        if (result1() && result2()) {
            plLi.each(function () {
                if ($(this).hasClass('selected-pl')) {

                    //console.log("individual " + $(this).data("individual") + "%");
                    indAward.text($(this).data("individual") + " %");
                }
            });
        } else {
            indAward.text('Вы не являетесь участником программы полугодового премирования');
        }

        //add new handler to have a possibility to display list again
        plUl.one('click', function () {

            //show li element
            plLi.removeClass('selected-pl');
            plLi.css('display', 'block');
            plUl.css("border", "1px solid grey").css("background", "rgba(241, 241, 241, 0.83)");

            //remove this handler && add first handler with recursion
            plUl.off();
            plUl.one('click', 'li', plHandler);
        })
    }

    function halfAnnualAward() {
        var a = +annualPercentage.val();
        if (a < 35) {
            halfAnnualReward.text(0);
        } else if (a > 50) {
            if (!isNaN(parseInt(indAward.text()) / 100 * amountSalary.text())) {
                halfAnnualReward.text(parseInt(indAward.text()) / 100 * +amountSalary.text())
            } else {
                halfAnnualReward.text(0);
            }
        } else {
            if (!isNaN(parseInt(indAward.text()) / 100 * +amountSalary.text() * +annualPercentage.val() / 100 * 2)) {
                halfAnnualReward.text(parseInt(indAward.text()) / 100 * +amountSalary.text() * +annualPercentage.val() / 100 * 2)
            } else {
                halfAnnualReward.text(0);
            }
        }
    }
    //rgba(241, 241, 241, 0.83)

</script>

