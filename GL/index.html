<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bowling score sheet</title>
    <!--<link href='https://fonts.googleapis.com/css?family=Roboto:400,500' rel='stylesheet' type='text/css'>-->
    <link rel="stylesheet" href="css/style.css"/>
    <script src="script/angular.min.js"></script>
    <script src="script/jquery-2.1.4.js"></script>
</head>
<body>

<h1>Bowling score calculator</h1>

<p class="notification"></p>

<div class="main-wrp" ng-app="app">

    <ul class="form">
        <li class="form_frame active">
            <label><input class="test1" type="text" name="shoot-score" data-approved="X" maxlength="1" data-scr
                          autofocus></label>
            <label><input class="test2" type="text" name="shoot-score" data-approved="/" maxlength="1" data-scr
                          disabled></label>

            <div class="form_frame--bottom">0</div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="X" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-approved="/" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">
            <label><input type="text" name="shoot-score" maxlength="1" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-scr disabled></label>
            <label><input type="text" name="shoot-score" maxlength="1" data-scr disabled></label>

            <div class="form_frame--bottom"></div>

        <li class="form_frame">

            <div class="form_frame--score">
                <p class="score_summ">0</p>

                <p class="score_header">SCORE</p>
            </div>
        </li>

    </ul>


    <div class="controller">
        <ul>
            <li id="missed" data-value="0" data-score="0">MISSED</li>
            <br/>
            <li data-value="1" data-score="1">1</li>
            <br/>
            <li data-value="2" data-score="2">2</li>
            <li data-value="3" data-score="3">3</li>
            <br/>
            <li data-value="4" data-score="4">4</li>
            <li data-value="5" data-score="5">5</li>
            <li data-value="6" data-score="6">6</li>
            <br/>
            <li data-value="7" data-score="7">7</li>
            <li data-value="8" data-score="8">8</li>
            <li data-value="9" data-score="9">9</li>
            <li id="last">10
                <span class="before">X</span>
                <span class="after">/</span>
            </li>
        </ul>
    </div>

    <div class="score-table" ng-controller="bowlingScore">
        <div class="score-table__ask"> Show <span>3</span><span>5</span><span>10</span> results</div>

        <div class="score-table__show"></div>
    </div>

</div>
<script>
    //Global method
    var storage = new Storage();

    //global constructor
    function Storage() {
        this.store = function (resultsArr) {
            localStorage.setItem('results', JSON.stringify(resultsArr));
        };
        this.load = function () {
            var resultsArr;
            try {
                resultsArr = JSON.parse(localStorage.getItem('results'));

                if (resultsArr) {

                    console.log(resultsArr.sort(function (a, b) {
                        return parseFloat(b.score) - parseFloat(a.score);
                    }));

                    //sort JSON array of objects by the score field
                    return resultsArr.sort(function (a, b) {
                        return parseFloat(b.score) - parseFloat(a.score);
                    });
                } else {
                    console.log("null???");
                    return resultsArr = [];
                }
            } catch (e) {
                localStorage.clear();
                console.log("Error fetched")
            }
        };
    }
</script>
<script src="script/mvc-script.js"></script>
<script src="script/script.js"></script>

</body>
</html>