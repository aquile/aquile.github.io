<!DOCTYPE html>
<html>
<head>
    <style>
        p {
            color: red;
        }

        input {
            outline: none;
        }

        .fieldValid {
            border: 1px solid #00ff00;
        }

        .fieldInvalid {
            border: 1px solid #ff0000;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.5/angular.min.js"></script>
</head>

<body ng-app="myapp">

<div ng-controller="MyController1">
    <form>
        <p>Binding inputs</p>
        <input type="text" name="firstName" ng-model="myForm.firstName"> First name <br/>
        <input type="text" name="lastName" ng-model="myForm.lastName"> Last name <br/>
        {{myForm.firstName}} {{myForm.lastName}}


        <p>Binding Checkboxes</p>
        <input type="checkbox" ng-model="myForm.wantNewsletter"
               ng-true-value="yes" ng-false-value="no" checked> Want newsletters? <br/>
        {{myForm.wantNewsletter}}

        <p>Binding Radio Buttons</p>
        <input type="radio" ng-model="myForm.whichNewsletter" value="weeklyNews">weeklyNews <br/>
        <input type="radio" ng-model="myForm.whichNewsletter" value="">monthlyNews <br/>
        {{myForm.whichNewsletter}}
    </form>

    <p>Binding Select Boxes</p>

    <div ng-controller="MyController2">
        <form>
            <select ng-model="myForm.car">
                <option value="nissan">Nissan</option>
                <option value="toyota">Toyota</option>
                <option value="fiat">Fiat</option>
            </select>
        </form>

        <div>
            {{myForm.car}}
        </div>
    </div>

    <p>ng-options</p>

    <div ng-controller="MyController3">
        <form>
            <select ng-model="myForm.car"
                    ng-options="obj.id as obj.name for obj in myForm.options">
                <!--The ng-options directive follows the following format:    optionBinding expression   dataSource expression-->
            </select>
        </form>

        <div>
            {{myForm.car}}
        </div>
    </div>

    <p>Empty Options</p>

    <div ng-controller="MyController4">
        <form>
            <select ng-model="myForm.car"
                    ng-options="obj.id as obj.name for obj in myForm.options">
                <option value="">Please choose a car</option>
            </select>
        </form>
        {{myForm.car}}
    </div>

    <p>Selecting Multiple Options</p>

    <div ng-controller="MyController5">
        <form>
            <select multiple="true" ng-model="myForm.car"
                    ng-options="obj.id as obj.name for obj in myForm.options">
            </select>
        </form>

        <div>
            {{myForm.car}}
        </div>
    </div>

    <p style="font-weight: 800; color: orange;">Form Validation</p>

    <p>ng-minlength + ng-maxlength</p>

    <div ng-controller="MyController6">
        <form>
            <input type="text" id="name1" ng-model="myForm.name" ng-minlength="5" ng-maxlength="12"> Name <br/>
        </form>

        <div>
            {{myForm.name}}
        </div>
    </div>

    <p>ng-pattern</p>

    <div ng-controller="MyController7">
        <form>
            <input type="text" id="name2" ng-model="myForm.name" ng-pattern="/^\d+$/"> Name <br/>
        </form>

        <div>
            {{myForm.name}}
        </div>

        <p>ng-required</p>

        <p>The ng-required directive checks if the value of the form field is empty or not. Actually, you just use the
            required attribute of HTML5, and AngularJS detects it automatically.</p>


        <p style="font-weight: 800; color: orange;">Checking Field Validation State</p>


    </div>

    <div ng-controller="MyController8">
        <form name="myFormNg">
            <!--<form ng-submit="myForm.submitTheForm()">-->
            <input type="text" ng-class="myForm.getFormFieldCssClass(myFormNg.name)"
                   id="name" name="name" ng-model="myForm.name" ng-minlength="5"> Name
                   <span ng-show="myFormNg.name.$invalid">
           <<<<< You must enter a valid name.>>>>>
        </span>
            <br/>
            <button ng-click="myForm.submitTheForm()" ng-disabled="myFormNg.$invalid">Submit Form</button>
        </form>

    </div>


</div>
<script>
    angular.module("myapp", [])
            .controller("MyController1", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.firstName = "Jakob";
                $scope.myForm.lastName = "Jenkov";
            })
            .controller("MyController2", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.car = "nissan";
            })
            .controller("MyController3", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.car = "basan";

                $scope.myForm.options = [
                    {id: "lisan", name: "Lissan"},
                    {id: "basan", name: "Basan"},
                    {id: "fatjan", name: "Fatjan"}
                ];
            })
            .controller("MyController4", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.car = "lisan";

                $scope.myForm.options = [
                    {id: "lisan", name: "Lissan"},
                    {id: "basan", name: "Basan"},
                    {id: "fatjan", name: "Fatjan"}
                ];
            })
            .controller("MyController5", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.car = ["mult"];

                $scope.myForm.options = [
                    {id: "mult", name: "Multiple"}
                    , {id: "toyota", name: "Toyota"}
                    , {id: "fiat", name: "Fiat"}
                ];

            })
            .controller("MyController6", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.name = "Jakob Jenkov";
            })
            .controller("MyController7", function ($scope) {
                $scope.myForm = {};
                $scope.myForm.name = "1";
            })
            .controller("MyController8", function ($scope, $http) {
                $scope.myForm = {};

                $scope.myForm.getFormFieldCssClass = function (ngModelController) {
                    //console.log("getting css class: " + ngModelController.$valid) ;
                    if (ngModelController.$pristine) return "";
                    return ngModelController.$valid ? "fieldValid" : "fieldInvalid";
                };

                $scope.myForm.submitTheForm = function(item, event) {
                    console.log("--> Submitting form");
                    var dataObject = {
                        name : $scope.myForm.name
                        ,car  : $scope.myForm.car
                    };

                    var responsePromise = $http.post("/angularjs-examples/json-test-data.jsp", dataObject, {});
                    responsePromise.success(function(dataFromServer, status, headers, config) {
                        console.log(dataFromServer.title);
                    });
                    responsePromise.error(function(data, status, headers, config) {
                        alert("Submitting form failed!");
                    });
                }
            })
</script>

</body>
</html>