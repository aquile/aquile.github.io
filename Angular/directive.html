<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.9/angular.min.js"></script>
    <script>
        // Write a directive that will translate text inside tags having "translate" attribute.
        // Translations must be loaded from  translations.json  file
        // json file should be loaded only once
        //
        // nice to have:  application shouldn't run until translations are loaded
        // (i.e. user shouldn't see untranslated text if loading translations file takes a long time)
    </script>
</head>
<body ng-app="myApp">

<div ng-controller="myCtrl">
    <h1 translate>Hello</h1>
</div>

<script>
    var myApp = angular.module('myApp', []);

    /*    myApp.factory('JSONrequest', ['$http', function ($http) {
     //create export for requests
     return {
     get: function (url) {
     return $http.get(url, {
     //do some stuff!
     transformResponse: function (response) {
     return JSON.parse(response);
     }
     })
     }
     }
     }]);*/
    myApp.directive("translate", ["$http", function (JSONrequest) {
        return {
            restrict: 'A',
            replace: true,
            compile: function compile ($scope, elem, attr){
                JSONrequest.get("./translations.json").then(function (lib) {
                    $scope.lib = lib.data;
                    console.log($scope.lib);
                });

            },
            link: function (scope, elem, attrs) {
                scope.foo = elem.textContent;
                console.log(scope.foo, scope.lib[scope.foo]);
                scope.translation = scope.lib[scope.foo];
                elem.html("{{"+scope.translation+"}}");
            },
            transclude: false
        }
    }]);
    myApp.controller('myCtrl', [function ($scope) {

    }]);
</script>
</body>
</html>